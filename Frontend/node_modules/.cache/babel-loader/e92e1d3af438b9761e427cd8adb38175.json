{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\habib\\\\Desktop\\\\patisserie\\\\Frontend\\\\src\\\\pages\\\\Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport '../styles/Register.css';\nimport { Link } from 'react-router-dom';\nimport useAxios from '../hooks/useAxios';\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Register = () => {\n  _s();\n\n  var _error$response;\n\n  const usercontext = useContext(UserContext);\n  console.log(usercontext);\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {\n    fetchData,\n    loading,\n    error\n  } = useAxios();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const response = await fetchData({\n      url: \"/register\",\n      data: {\n        email,\n        password\n      }\n    });\n    console.log(response);\n\n    if (response) {\n      const {\n        data\n      } = response;\n      usercontext.login({\n        token: data.token,\n        user: {\n          id: data.id,\n          email: data.email\n        }\n      });\n    }\n\n    ;\n  };\n\n  useEffect(() => {\n    if (usercontext.loggedin) navigate('/accueil');\n  }, [usercontext.loggedin]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rg-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"rg-second\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          type: \"email\",\n          placeholder: \"UserEmail\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 15\n        }, this), (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            color: \"red\"\n          },\n          children: error.response.data.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 43\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          type: \"password\",\n          placeholder: \"Password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rg-first\",\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"aknmgJZ46wsml/uNNo74v95ejTU=\", false, function () {\n  return [useNavigate, useAxios];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/habib/Desktop/patisserie/Frontend/src/pages/Register.js"],"names":["React","useState","useEffect","useContext","useNavigate","Link","useAxios","UserContext","Register","usercontext","console","log","navigate","email","setEmail","password","setPassword","fetchData","loading","error","handleSubmit","e","preventDefault","response","url","data","login","token","user","id","loggedin","target","value","color","message"],"mappings":"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","sourcesContent":["import React,{useState , useEffect ,useContext} from 'react'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport '../styles/Register.css'\r\nimport { Link } from 'react-router-dom'\r\nimport useAxios from '../hooks/useAxios';\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\nconst Register = () => {\r\n  const usercontext = useContext(UserContext)\r\n  console.log(usercontext);\r\n\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const {fetchData, loading, error} = useAxios();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); \r\n    const response = await fetchData({url: \"/register\", data: {email, password}});\r\n    console.log(response);\r\n\r\n    if(response){\r\n      const {data} = response;\r\n    usercontext.login({token: data.token, user: {id: data.id, email: data.email}})    };\r\n    } \r\n\r\n  \r\n  \r\n  useEffect(() => {\r\n    if(usercontext.loggedin) navigate('/accueil');\r\n  }, [usercontext.loggedin]);\r\n \r\n  return (\r\n    <div className='bg'>\r\n        <div className='rg-container'>\r\n          \r\n            <form className='rg-second' onSubmit={handleSubmit}>\r\n              <h1>Sign up</h1>\r\n              <input \r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              type=\"email\"\r\n              placeholder=\"UserEmail\"\r\n              required\r\n              ></input>\r\n              { error?.response?.data &&  <small style={{color: \"red\"}}>{error.response.data.message}</small>}\r\n              <input \r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              required\r\n              ></input>\r\n              \r\n              <Link to='/login'>Login</Link>\r\n              <button type='submit'>Sign up</button>\r\n            </form>\r\n            <div className='rg-first'> </div>\r\n        </div>\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default Register\r\n"]},"metadata":{},"sourceType":"module"}