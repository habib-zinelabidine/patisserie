{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\habib\\\\Desktop\\\\patisserie\\\\Frontend\\\\src\\\\pages\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport '../styles/Login.css';\nimport { Link } from \"react-router-dom\";\nimport useAxios from '../hooks/useAxios';\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  var _error$response;\n\n  const usercontext = useContext(UserContext);\n  console.log(usercontext);\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {\n    fetchData,\n    loading,\n    error\n  } = useAxios();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const response = await fetchData({\n      url: \"/login\",\n      data: {\n        email,\n        password\n      }\n    });\n    console.log(response);\n\n    if (response) {\n      const {\n        data\n      } = response;\n      usercontext.login({\n        token: data.token,\n        user: {\n          id: data.id,\n          email: data.email\n        }\n      });\n    }\n\n    ;\n  };\n\n  useEffect(() => {\n    if (usercontext.loggedin) navigate('/accueil');\n  }, [usercontext.loggedin]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"first\",\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"second\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          type: \"email\",\n          placeholder: \"UserEmail\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this), (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            color: \"red\"\n          },\n          children: error.response.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          type: \"password\",\n          placeholder: \"Password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"Create account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: loading ? 'Loading ...' : 'Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"aknmgJZ46wsml/uNNo74v95ejTU=\", false, function () {\n  return [useNavigate, useAxios];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/habib/Desktop/patisserie/Frontend/src/pages/Login.js"],"names":["React","useEffect","useState","useContext","useNavigate","Link","useAxios","UserContext","Login","usercontext","console","log","navigate","email","setEmail","password","setPassword","fetchData","loading","error","handleSubmit","e","preventDefault","response","url","data","login","token","user","id","loggedin","target","value","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState,useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport '../styles/Login.css'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport useAxios from '../hooks/useAxios';\r\n\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\n\r\nconst Login = () => {\r\n  const usercontext = useContext(UserContext)\r\n  console.log(usercontext);\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const {fetchData, loading, error} = useAxios();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); \r\n    const response = await fetchData({url: \"/login\", data: {email, password}});\r\n    console.log(response);\r\n\r\n    if(response) {\r\n      const {data} = response;\r\n    usercontext.login({token: data.token, user: {id: data.id, email: data.email}})    };\r\n    \r\n  }\r\n  \r\n  useEffect(() => {\r\n    if(usercontext.loggedin) navigate('/accueil');\r\n  }, [usercontext.loggedin]);\r\n\r\n  \r\n  return (\r\n\r\n    <div className=\"bg\">\r\n      <div className=\"container\">\r\n        <div className=\"first\"> </div>\r\n        <form className=\"second\" onSubmit={handleSubmit}>\r\n          <h1>Login</h1>\r\n            <input\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              type=\"email\"\r\n              placeholder=\"UserEmail\"\r\n              required\r\n            ></input>\r\n            { error?.response?.data &&  <small style={{color: \"red\"}}>{error.response.data}</small>}\r\n            <input\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              required\r\n            ></input>\r\n            <Link to=\"/\">Create account</Link>\r\n            <button type=\"submit\">{loading ? 'Loading ...': 'Login'}</button>\r\n          </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}